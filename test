from bqplot import pyplot as plt
import bqplot as bq
import ipywidgets as widgets
from src.imports import read_eye_data
from src.analysis import predict_possible_saccades
import src.plots as plots
import matplotlib
import numpy as np

# init some values
iTrial = 0

# get the data
x_matrix,y_matrix  = read_eye_data()
ntrials, trialtime = np.shape(x_matrix)

# predict possible saccades based on old weights
total_predictions = predict_possible_saccades(x_matrix,y_matrix,sampfreq=1000,min_sacc_dur=6,min_sacc_dist = 10)

# %%
import matplotlib.pyplot as plt
plt.plot(total_predictions[0,:])

ntrials,time = np.shape(total_predictions)

onsets  = []
offsets = []
for j in range(ntrials):
    onsets.append(np.asarray(np.where(np.diff(total_predictions[0,:])==1)) + 1)
    offsets.append(np.asarray(np.where(np.diff(total_predictions[0,:])==-1)) )
 